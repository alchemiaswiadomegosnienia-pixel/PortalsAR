<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=yes">
    <title>ğŸŒ€ AR Portale</title>

    <!-- A-Frame + AR.js -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <!-- WÅ‚asne style -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- ============ EKRAN ÅADOWANIA ============ -->
    <div id="loading-screen">
        <div class="loader-content">
            <div class="spinner"></div>
            <h1>ğŸŒ€ AR Portale</h1>
            <p id="loading-status">Inicjalizacja...</p>
            <div class="permission-buttons" id="permission-buttons" style="display:none;">
                <button id="btn-start" class="btn-primary">
                    ğŸ“¸ Uruchom kamerÄ™ i GPS
                </button>
            </div>
        </div>
    </div>

    <!-- ============ HUD ============ -->
    <div id="hud" style="display:none;">
        <!-- GÃ³rny pasek -->
        <div class="hud-top">
            <div class="hud-status">
                <span id="gps-status">ğŸ“¡ Szukam GPS...</span>
                <span id="portal-count">ğŸŒ€ 0 portali</span>
                <span id="time-display">ğŸ• --:--</span>
            </div>
        </div>

        <!-- Dolny pasek -->
        <div class="hud-bottom">
            <button id="btn-camera-switch" class="hud-btn" title="PrzeÅ‚Ä…cz kamerÄ™">
                ğŸ”„ Kamera
            </button>
            <button id="btn-refresh" class="hud-btn" title="OdÅ›wieÅ¼ portale">
                ğŸ”ƒ OdÅ›wieÅ¼
            </button>
            <button id="btn-debug" class="hud-btn" title="Debug info">
                ğŸ› Debug
            </button>
        </div>

        <!-- Panel debug -->
        <div id="debug-panel" style="display:none;">
            <pre id="debug-info"></pre>
            <button id="btn-close-debug" class="btn-small">âœ• Zamknij</button>
        </div>

        <!-- Kompas / wskaÅºnik kierunku -->
        <div id="direction-indicator" style="display:none;">
            <div class="arrow">â¬†</div>
            <span id="direction-text">Portal: 120m â†’</span>
        </div>
    </div>

    <!-- ============ SCENA AR ============ -->
    <a-scene
        id="ar-scene"
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; 
              videoTexture: true; 
              debugUIEnabled: false;"
        renderer="logarithmicDepthBuffer: true; 
                  precision: medium;
                  antialias: true;"
        loading-screen="enabled: false"
        style="display:none;"
    >
        <!-- Assets preload -->
        <a-assets id="ar-assets" timeout="30000">
            <!-- Modele bÄ™dÄ… Å‚adowane dynamicznie -->
        </a-assets>

        <!-- Kamera GPS -->
        <a-camera 
            id="ar-camera"
            gps-camera 
            rotation-reader
            look-controls-enabled="false"
        ></a-camera>

        <!-- Portale bÄ™dÄ… dodawane dynamicznie przez engine.js -->
    </a-scene>

    <!-- Skrypty -->
    <script src="js/portals.js"></script>
    <script src="js/engine.js"></script>
</body>
</html>
